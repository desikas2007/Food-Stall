<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Food Stall</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'Inter', sans-serif; overflow-x: hidden; }

/* LOGIN PAGE */
#loginPage {
  background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
              url('https://images.unsplash.com/photo-1504674900247-0877df9cc836?auto=format&fit=crop&w=1600&q=80') 
              center/cover no-repeat fixed;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column; /* ensures center alignment */
  position: relative;
}
.login-container {
  max-width: 380px; background: rgba(255,255,255,0.1);
  padding: 40px; border-radius: 15px; text-align: center;
  backdrop-filter: blur(10px); box-shadow: 0 0 15px rgba(0,0,0,0.3);
}
.login-container h2 { color: white; margin-bottom: 20px; }
.login-container input {
  width: 100%; padding: 12px; margin: 10px 0;
  border-radius: 8px; border: none; outline: none;
}
.login-container button {
  width: 100%; padding: 12px;
  background: linear-gradient(45deg, #ff4b5c, #ff0000);
  color: white; border-radius: 8px; font-weight: bold; cursor: pointer; transition: 0.3s;
}
.login-container button:hover {
  transform: scale(1.05);
  background: linear-gradient(45deg, #ff0000, #cc0000);
}
.login-container a {
  color: white; display: block; margin-top: 15px; text-decoration: underline;
}


/* MENU PAGE */
#menuPage {
  display: none; min-height: 100vh;
  background-image: linear-gradient(rgba(12,25,40,0.45), rgba(12,25,40,0.45)),
                    url('https://images.unsplash.com/photo-1503264116251-35a269479413?auto=format&fit=crop&w=1600&q=80');
  background-size: cover; background-position: center; color: white; animation: fadeIn 1s ease;
}
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

header {
  display: flex; justify-content: space-between; align-items: center;
  padding: 20px; background: rgba(0,0,0,0.5);
}
header h1 { font-size: 28px; }
header button {
  padding: 10px 20px; background: crimson; color: white;
  border: none; border-radius: 8px; cursor: pointer; font-weight: bold;
}

/* FOOD CARDS */
.container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 40px; }
.card {
  background: rgba(255,255,255,0.1); border-radius: 12px; padding: 20px; width: 250px;
  text-align: center; backdrop-filter: blur(5px); transition: transform 0.3s;
}
.card:hover { transform: translateY(-5px); }
.card img { width: 100%; border-radius: 10px; height: 150px; object-fit: cover; }
.card button {
  margin-top: 10px; background: #00b894; padding: 8px 16px;
  border: none; border-radius: 6px; color: white; font-weight: bold;
  cursor: pointer; transition: 0.3s;
}
.card button:hover { background: #019870; }

/* CART */
#cartSummary {
  position: fixed; top: 0; right: -400px; width: 350px; height: 100vh;
  background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); color: white;
  padding: 30px; transition: right 0.6s ease; box-shadow: -4px 0 20px rgba(0,0,0,0.5); z-index: 10;
}
#cartSummary.active { right: 0; }
#cartSummary h3 { text-align: center; margin-bottom: 15px; }
#cartItems { max-height: 60vh; overflow-y: auto; }
#cartItems p { margin: 5px 0; border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 5px; }
#total { font-weight: bold; margin: 15px 0; text-align: center; font-size: 18px; }
#placeOrder {
  background: #ff4757; padding: 12px 24px; border-radius: 8px;
  border: none; color: white; cursor: pointer; font-weight: bold;
  transition: 0.3s; width: 100%;
}
#placeOrder:hover { background: #e84118; }
#cartBtn {
  position: fixed; top: 100px; right: 25px;
  background: #00cec9; border: none; padding: 15px; border-radius: 50%;
  color: white; font-weight: bold; font-size: 20px;
  cursor: pointer; box-shadow: 0 0 10px rgba(0,0,0,0.4); z-index: 9;
}
#cartBtn:hover { background: #009688; }

/* ORDER CHOICE MODAL */
#orderChoiceModal {
  display: none; position: fixed; top:0; left:0;
  width:100%; height:100%; background: rgba(0,0,0,0.6);
  justify-content:center; align-items:center; z-index:20;
}
#orderChoiceModal div {
  background:white; padding:20px; border-radius:10px;
  text-align:center; width:300px;
}
#orderChoiceModal button {
  margin:10px; padding:10px 20px; border:none;
  border-radius:5px; cursor:pointer;
}
#orderChoiceModal .cancel { background:#ccc; color:black; }
#orderChoiceModal .zomato { background:#ff4b5c; color:white; }
#orderChoiceModal .swiggy { background:#00b894; color:white; }

/* Floating labels */
.seller {
  position: absolute; font-size: 26px; font-weight: bold;
  animation: floatDown 3s ease-in-out infinite alternate;
}
@keyframes floatDown {
  0% { transform: translateY(-10px); }
  100% { transform: translateY(10px); }
}
.seller.zomato { left: 20px; top: 20px; color: #ff4b5c; }
.seller.swiggy { right: 20px; top: 20px; color: #ff9800; }
</style>
</head>
<body>

<!-- LOGIN PAGE -->
<div id="loginPage">
  <div class="seller zomato">üçΩ Zomato</div>
  <div class="seller swiggy">üç≤ Swiggy</div>
  <center>
  <div class="login-container">
    <h2>Login</h2>
    <input type="email" id="email" placeholder="Enter Gmail" required>
    <input type="password" id="password" placeholder="Enter Password" required>
    <button onclick="register()">Sign In</button>
    <a href="signup.html">Don't have an account?Create it </a>
  </div></center>
</div>

<!-- MENU PAGE -->
<div id="menuPage">
  <header>
    <h1>üçÉ Cool Breeze Food Stall</h1>
    <button onclick="logout()">Logout</button>
  </header>

  <div class="container" id="menuCards"></div>
  <button id="cartBtn" onclick="toggleCart()">üõí</button>

  <div id="cartSummary">
    <h3>üõí Your Cart</h3>
    <div id="cartItems"></div>
    <p id="total">Total: ‚Çπ0</p>
    <button id="placeOrder" onclick="placeOrder()">Place Order</button>
  </div>
</div>

<!-- ORDER CHOICE MODAL -->
<div id="orderChoiceModal">
  <div>
    <h3>Choose a Seller</h3>
    <button class="zomato" onclick="selectSeller('zomato')">Zomato</button>
    <button class="swiggy" onclick="selectSeller('swiggy')">Swiggy</button>
    <br>
    <button class="cancel" onclick="closeOrderModal()">Cancel</button>
  </div>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDWi-Z8m87qiqmX_kY91uweUHxpBQcNt-c",
  authDomain: "food-stall-86291.firebaseapp.com",
  projectId: "food-stall-86291",
  storageBucket: "food-stall-86291.firebasestorage.app",
  messagingSenderId: "602617888711",
  appId: "1:602617888711:web:bebb6540d7166f1889e3e2",
  measurementId: "G-LVRLGZD4LK"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

const foods = [
  {name:"Masala Dosa", zomatoPrice:80, swiggyPrice:85, img:"https://png.pngtree.com/thumb_back/fh260/background/20250618/pngtree-masala-dosa-crispy-indian-crepe-filled-with-spiced-potatoes-image_17438896.jpg", zomato:"https://www.zomato.com/coimbatore/delivery/dish-masala-dosa", swiggy:"https://www.swiggy.com/city/coimbatore/masala-dosa-dish-restaurants"},
  {name:"Paneer Butter Masala", zomatoPrice:150, swiggyPrice:155, img:"https://static.vecteezy.com/system/resources/previews/053/315/226/non_2x/delicious-paneer-butter-masala-indian-dish-with-naan-photo.jpeg", zomato:"https://www.zomato.com/coimbatore/delivery/dish-paneer-butter-masala", swiggy:"https://www.swiggy.com/city/coimbatore/paneer-butter-masala-dish-restaurants"},
  {name:"Veg Biryani", zomatoPrice:120, swiggyPrice:125, img:"https://i.ytimg.com/vi/Do7ZdUodDdw/hq720.jpg", zomato:"https://www.zomato.com/coimbatore/delivery/dish-veg-biryani?utm_source=chatgpt.com",swiggy:"https://www.swiggy.com/city/coimbatore/veg-biryani-dish-restaurants?utm_source=chatgpt.com"},
  {name:"Idli Sambar", zomatoPrice:60, swiggyPrice:65, img:"https://static.toiimg.com/thumb/msid-113810989,width-1280,height-720,resizemode-4/113810989.jpg", zomato:"https://www.zomato.com/coimbatore/delivery/dish-idli?utm_source=chatgpt.com", swiggy:"https://www.swiggy.com/city/coimbatore/sambar-dish-restaurants?utm_source=chatgpt.com"},
  {name:"Chicken Curry", zomatoPrice:180, swiggyPrice:185, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQQgSA146aPPQY-9_jiSHNcdR1Rm2aHwjNgXg&s", zomato:"https://www.zomato.com/coimbatore/mr-curry-1-kavundampalayam/order?utm_source=chatgpt.com", swiggy:"https://www.swiggy.com/city/coimbatore/green-tree-restaurant-sivanandhapuram-saravanampatti-rest360542?utm_source=chatgpt.com"},
  {name:"Vada Pav", zomatoPrice:40, swiggyPrice:45, img:"https://media.istockphoto.com/id/1329213718/photo/vada-pav.jpg?s=612x612&w=0&k=20&c=Yy3pm53KrPAnZXL9weCJDzXjxa2My34oVFx7RBCPmZ8=", zomato:"https://www.zomato.com/coimbatore/delivery/dish-vada-pav", swiggy:"https://www.swiggy.com/city/coimbatore/vada-pav-dish-restaurants"},
  {name:"Samosa", zomatoPrice:30, swiggyPrice:35, img:"https://static.vecteezy.com/system/resources/thumbnails/028/857/626/small/samosa-curry-stuffed-with-methi-diwali-stock-images-realistic-stocks-photo.jpg", zomato:"https://www.zomato.com/coimbatore/delivery/dish-samosa", swiggy:"https://www.swiggy.com/city/coimbatore/samosa-dish-restaurants"},
  {name:"Chole Bhature", zomatoPrice:110, swiggyPrice:115, img:"https://indaroma.com/wp-content/uploads/2024/02/Chole-Bhatura-1-scaled.jpeg", zomato:"https://www.zomato.com/coimbatore/delivery/dish-chole-bhature", swiggy:"https://www.swiggy.com/city/coimbatore/chole-bhature-dish-restaurants"},
  {name:"Pav Bhaji", zomatoPrice:90, swiggyPrice:95, img:"https://www.cubesnjuliennes.com/wp-content/uploads/2020/07/Instant-Pot-Mumbai-Pav-Bhaji-Recipe.jpg",zomato:"https://www.zomato.com/coimbatore/delivery/dish-pav-bhaji?utm_source=chatgpt.com",swiggy:"https://www.swiggy.com/city/coimbatore/pav-bhaji-dish-restaurants?utm_source=chatgpt.com"},
  {name:"Momos", zomatoPrice:70, swiggyPrice:75, img:"https://static.india.com/wp-content/uploads/2024/12/FEATURE-2024-12-15T174448.090.jpg", zomato:"https://www.zomato.com/coimbatore/delivery/dish-momos",swiggy:"https://www.swiggy.com/city/coimbatore/momos-dish-restaurants?utm_source=chatgpt.com"},
  {name:"Tandoori Chicken", zomatoPrice:200, swiggyPrice:205, img:"https://www.cubesnjuliennes.com/wp-content/uploads/2022/12/Tandoori-Chicken-Recipe.jpg", zomato:"https://www.zomato.com/coimbatore/delivery/dish-tandoori-chicken?utm_source=chatgpt.com", swiggy:"https://www.swiggy.com/city/coimbatore/tandoori-chicken-dish-restaurants?utm_source=chatgpt.com"},
  {name:"Dal Makhani", zomatoPrice:130, swiggyPrice:135, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT9NubCId4fEYLxIPftzNJxJ791AmypuHopsA&s", zomato:"https://www.zomato.com/coimbatore/delivery/dish-dal-makhani", swiggy:"https://www.swiggy.com/city/coimbatore/dal-makhani-dish-restaurants"},
  {name:"Gulab Jamun", zomatoPrice:90, swiggyPrice:95, img:"https://sharmanjainsweets.com/cdn/shop/articles/Untitled_design_eb07557c-e535-4bdf-9063-8a1f1cffa58c.png", zomato:"https://www.zomato.com/coimbatore/delivery/dish-gulab-jamun", swiggy:"https://www.swiggy.com/city/coimbatore/gulab-jamun-dish-restaurants"},
  {name:"Rasmalai", zomatoPrice:120, swiggyPrice:125, img:"https://static.toiimg.com/thumb/68358712.cms?imgsize=403497&width=800&height=800", zomato:"https://www.zomato.com/coimbatore/delivery/dish-rasmalai", swiggy:"https://www.swiggy.com/city/coimbatore/rasmalai-dish-restaurants"},
  {name:"Pani Puri", zomatoPrice:50, swiggyPrice:55, img:"https://i2.wp.com/wp-backend.thefearlesscooking.com/wp-content/uploads/2022/03/WhatsApp-Image-2022-03-10-at-4.45.10-PM.jpeg?fit=1536%2C1024&ssl=1", zomato:"https://www.zomato.com/coimbatore/delivery/dish-panipuri?utm_source=chatgpt.com", swiggy:"https://www.swiggy.com/city/coimbatore/pani-puri-dish-restaurants?utm_source=chatgpt.com"}
];

let cart = [];
let lastOrderedFood = null;

// --- LOGIN ---
function register(){
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();

  if(email && password){
    auth.signInWithEmailAndPassword(email, password)
      .then(userCredential => {
        storeUser(email, userCredential.user);
        showMenu();
      })
      .catch(error => {
        if(error.code === "auth/user-not-found"){
          auth.createUserWithEmailAndPassword(email, password)
            .then(userCredential => {
              storeUser(email, userCredential.user);
              showMenu();
            })
            .catch(err => alert(err.message));
        } else {
          alert(error.message);
        }
      });
  } else {
    alert("Enter Gmail and Password");
  }
}

function storeUser(email, user){
  if(user){
    db.collection("users").doc(user.uid).set({
      email: email,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    });
  }
}


// --- MENU LOAD ---
function showMenu(){
  document.getElementById("loginPage").style.display="none";
  document.getElementById("menuPage").style.display="block";
  loadMenu();
}

function loadMenu(){
  const menuDiv = document.getElementById("menuCards");
  menuDiv.innerHTML="";
  foods.forEach(food=>{
    let priceDiff = food.zomatoPrice !== food.swiggyPrice ? `<span style="color:red;font-weight:bold;"> (‚Çπ${Math.abs(food.zomatoPrice-food.swiggyPrice)} difference)</span>` : "";
    menuDiv.innerHTML+=`
      <div class="card">
        <img src="${food.img}">
        <h3>${food.name}</h3>
        <p>Zomato: ‚Çπ${food.zomatoPrice}</p>
        <p>Swiggy: ‚Çπ${food.swiggyPrice} ${priceDiff}</p>
        <button onclick="addToCart('${food.name}')">Add to Cart</button>
      </div>`;
  });
}

// --- CART ---
function addToCart(name){
  let food = foods.find(f => f.name===name);
  cart.push({ name: food.name, zomatoPrice: food.zomatoPrice, swiggyPrice: food.swiggyPrice });
  lastOrderedFood = food;
  updateCart();
  toggleCart(true);
}

function updateCart(){
  const cartDiv = document.getElementById("cartItems");
  cartDiv.innerHTML="";
  let totalZomato = 0, totalSwiggy = 0;
  cart.forEach(item=>{
    cartDiv.innerHTML+=`<p>${item.name} ‚Äî Zomato: ‚Çπ${item.zomatoPrice} | Swiggy: ‚Çπ${item.swiggyPrice}</p>`;
    totalZomato += item.zomatoPrice;
    totalSwiggy += item.swiggyPrice;
  });
  let diff = totalZomato!==totalSwiggy ? `<span style="color:red;">(‚Çπ${Math.abs(totalZomato-totalSwiggy)} difference)</span>` : "";
  document.getElementById("total").innerHTML=`Total ‚Äî Zomato: ‚Çπ${totalZomato} | Swiggy: ‚Çπ${totalSwiggy} ${diff}`;
}

function toggleCart(forceOpen=false){
  const cartDiv = document.getElementById("cartSummary");
  if(forceOpen) cartDiv.classList.add("active"); else cartDiv.classList.toggle("active");
}

// --- ORDER ---
function placeOrder(){
  if(cart.length===0) {
    alert("Your cart is empty!");
    return;
  }
  document.getElementById("orderChoiceModal").style.display="flex";
}

function selectSeller(seller){
  if(cart.length === 0){
    alert("Something went wrong!");
    return;
  }
  
  cart.forEach(item => {
    let food = foods.find(f => f.name === item.name);
    if(food){
      let site = seller === "zomato" ? food.zomato : food.swiggy;
      window.open(site, "_blank");
    }
  });

  alert(`Order placed successfully on ${seller.charAt(0).toUpperCase() + seller.slice(1)}!`);
  cart = [];
  updateCart();
  toggleCart(false);
  closeOrderModal();
}


function closeOrderModal(){
  document.getElementById("orderChoiceModal").style.display="none";
}

// --- LOGOUT ---
function logout(){ auth.signOut().then(()=>{ location.reload(); }); }
auth.onAuthStateChanged(user => {
  if(user){
    showMenu();
  } else {
    document.getElementById("loginPage").style.display = "block";
    document.getElementById("menuPage").style.display = "none";
  }
});

</script>
</body>
</html>
